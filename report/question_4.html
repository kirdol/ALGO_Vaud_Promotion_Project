<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>question_4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="question_4_files/libs/clipboard/clipboard.min.js"></script>
<script src="question_4_files/libs/quarto-html/quarto.js"></script>
<script src="question_4_files/libs/quarto-html/popper.min.js"></script>
<script src="question_4_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="question_4_files/libs/quarto-html/anchor.min.js"></script>
<link href="question_4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="question_4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="question_4_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="question_4_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="question_4_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<link href="question_4_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="question_4_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="question_4_files/libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="question_4_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="question_4_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="question_4_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="question_4_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="question_4_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="question_4_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="question_4_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="question_4_files/libs/datatables-binding-0.33/datatables.js"></script>
<link href="question_4_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="question_4_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="question_4_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="question-4" class="level1">
<h1>Question 4</h1>
<blockquote class="blockquote">
<p>Where did they stay? (For example: yes, they went to Montreux, but what type of accommodation, what price?</p>
</blockquote>
<p>Let’s now dive into the subject of the location of their stay. First, let’s have a look at the most popular locations in the canton Vaud. Given the architecture of the study this gives us the city where most people answer the survey.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ea99819fae7a22c98f0c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ea99819fae7a22c98f0c">{"x":{"visdat":{"9f3e1d5a2b8e":["function () ","plotlyVisDat"]},"cur_data":"9f3e1d5a2b8e","attrs":{"9f3e1d5a2b8e":{"x":{},"y":{},"text":"","hoverinfo":"text","hovertext":{},"textposition":"auto","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Most Popular Destinations (City)","xaxis":{"domain":[0,1],"automargin":true,"title":"City","showgrid":false,"zeroline":false,"tickangle":45,"type":"category","categoryorder":"array","categoryarray":["Lausanne","Montreux","Leysin","Château-d'Oex","Morges","Nyon","Yverdon-les-Bains","Les Diablerets","Villars-sur-Ollon","Rougemont","Vevey","Le Chenit","L'Abbaye","Le Pont","Vallorbe","Cully","Le Sentier","Estavayer-le-Lac","Gryon","Bex","Chexbres","Ormont-Dessus","Aigle","Le Rocheray","La Tour-de-Peilz","Orbe","Ecublens (VD)","Rossinière","Saint Croix","Blonay","Villeneuve (VD)","Lavey-Morcles","Ormont-Dessous","Veytaux","Aubonne","Chavannes-de-Bogis","Le Brassus","Lucens","Prangins","Rolle","Bourg-en-Lavaux","Chernex","Coppet","Payerne","Yvonand","Cudrefin","Yens","Avenches","Bullet","Bussigny","Corsier-sur-Vevey","Founex","Saint-Légier-La-Chiésaz","Chardonne","Commugny","Crissier","Duillier","Echallens","Gilly","La Praz","Les Charbonnieres","Les Rasses","Montagny-près-Yverdon","Renens","Saint-Sulpice (VD)","St. Aubin","Valbroye"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Proportion","showgrid":true,"zeroline":false},"hovermode":"x","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"modeBarButtonsToRemove":["pan2d","select2d","lasso2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines","zoom"]},"data":[{"x":["Aigle","Aubonne","Avenches","Bex","Blonay","Bourg-en-Lavaux","Bullet","Bussigny","Chardonne","Château-d'Oex","Chavannes-de-Bogis","Chernex","Chexbres","Commugny","Coppet","Corsier-sur-Vevey","Crissier","Cudrefin","Cully","Duillier","Echallens","Ecublens (VD)","Estavayer-le-Lac","Founex","Gilly","Gryon","L'Abbaye","La Praz","La Tour-de-Peilz","Lausanne","Lavey-Morcles","Le Brassus","Le Chenit","Le Pont","Le Rocheray","Le Sentier","Les Charbonnieres","Les Diablerets","Les Rasses","Leysin","Lucens","Montagny-près-Yverdon","Montreux","Morges","Nyon","Orbe","Ormont-Dessous","Ormont-Dessus","Payerne","Prangins","Renens","Rolle","Rossinière","Rougemont","Saint Croix","Saint-Légier-La-Chiésaz","Saint-Sulpice (VD)","St. Aubin","Valbroye","Vallorbe","Vevey","Veytaux","Villars-sur-Ollon","Villeneuve (VD)","Yens","Yverdon-les-Bains","Yvonand"],"y":[0.0044247787610619468,0.002011263073209976,0.0008045052292839903,0.0052292839903459376,0.0028157683024939663,0.0016090104585679806,0.0008045052292839903,0.0008045052292839903,0.00040225261464199515,0.072807723250201128,0.002011263073209976,0.0016090104585679806,0.0048270313757039418,0.00040225261464199515,0.0016090104585679806,0.0008045052292839903,0.00040225261464199515,0.0012067578439259854,0.0068382944489139182,0.00040225261464199515,0.00040225261464199515,0.0032180209171359612,0.0056315366049879325,0.0008045052292839903,0.00040225261464199515,0.0056315366049879325,0.014883346741753822,0.00040225261464199515,0.0040225261464199519,0.25221238938053098,0.0024135156878519709,0.002011263073209976,0.015687851971037812,0.01407884151246983,0.0044247787610619468,0.0060337892196299274,0.00040225261464199515,0.048672566371681415,0.00040225261464199515,0.081255028157683026,0.002011263073209976,0.00040225261464199515,0.10740144810941271,0.072807723250201128,0.06154465004022526,0.0036202735317779565,0.0024135156878519709,0.0048270313757039418,0.0016090104585679806,0.002011263073209976,0.00040225261464199515,0.002011263073209976,0.0032180209171359612,0.027755430410297668,0.0032180209171359612,0.0008045052292839903,0.00040225261464199515,0.00040225261464199515,0.00040225261464199515,0.0080450522928399038,0.026548672566371681,0.0024135156878519709,0.031777956556717619,0.0028157683024939663,0.0012067578439259854,0.053499597747385358,0.0016090104585679806],"text":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"hovertext":["City name:  Aigle <br>Number of people visiting this city: 11 / 2486 <br>Proportion of people visiting this city: 0.442%","City name:  Aubonne <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Avenches <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Bex <br>Number of people visiting this city: 13 / 2486 <br>Proportion of people visiting this city: 0.523%","City name:  Blonay <br>Number of people visiting this city: 7 / 2486 <br>Proportion of people visiting this city: 0.282%","City name:  Bourg-en-Lavaux <br>Number of people visiting this city: 4 / 2486 <br>Proportion of people visiting this city: 0.161%","City name:  Bullet <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Bussigny <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Chardonne <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Château-d'Oex <br>Number of people visiting this city: 181 / 2486 <br>Proportion of people visiting this city: 7.281%","City name:  Chavannes-de-Bogis <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Chernex <br>Number of people visiting this city: 4 / 2486 <br>Proportion of people visiting this city: 0.161%","City name:  Chexbres <br>Number of people visiting this city: 12 / 2486 <br>Proportion of people visiting this city: 0.483%","City name:  Commugny <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Coppet <br>Number of people visiting this city: 4 / 2486 <br>Proportion of people visiting this city: 0.161%","City name:  Corsier-sur-Vevey <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Crissier <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Cudrefin <br>Number of people visiting this city: 3 / 2486 <br>Proportion of people visiting this city: 0.121%","City name:  Cully <br>Number of people visiting this city: 17 / 2486 <br>Proportion of people visiting this city: 0.684%","City name:  Duillier <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Echallens <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Ecublens (VD) <br>Number of people visiting this city: 8 / 2486 <br>Proportion of people visiting this city: 0.322%","City name:  Estavayer-le-Lac <br>Number of people visiting this city: 14 / 2486 <br>Proportion of people visiting this city: 0.563%","City name:  Founex <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Gilly <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Gryon <br>Number of people visiting this city: 14 / 2486 <br>Proportion of people visiting this city: 0.563%","City name:  L'Abbaye <br>Number of people visiting this city: 37 / 2486 <br>Proportion of people visiting this city: 1.488%","City name:  La Praz <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  La Tour-de-Peilz <br>Number of people visiting this city: 10 / 2486 <br>Proportion of people visiting this city: 0.402%","City name:  Lausanne <br>Number of people visiting this city: 627 / 2486 <br>Proportion of people visiting this city: 25.221%","City name:  Lavey-Morcles <br>Number of people visiting this city: 6 / 2486 <br>Proportion of people visiting this city: 0.241%","City name:  Le Brassus <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Le Chenit <br>Number of people visiting this city: 39 / 2486 <br>Proportion of people visiting this city: 1.569%","City name:  Le Pont <br>Number of people visiting this city: 35 / 2486 <br>Proportion of people visiting this city: 1.408%","City name:  Le Rocheray <br>Number of people visiting this city: 11 / 2486 <br>Proportion of people visiting this city: 0.442%","City name:  Le Sentier <br>Number of people visiting this city: 15 / 2486 <br>Proportion of people visiting this city: 0.603%","City name:  Les Charbonnieres <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Les Diablerets <br>Number of people visiting this city: 121 / 2486 <br>Proportion of people visiting this city: 4.867%","City name:  Les Rasses <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Leysin <br>Number of people visiting this city: 202 / 2486 <br>Proportion of people visiting this city: 8.126%","City name:  Lucens <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Montagny-près-Yverdon <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Montreux <br>Number of people visiting this city: 267 / 2486 <br>Proportion of people visiting this city: 10.740%","City name:  Morges <br>Number of people visiting this city: 181 / 2486 <br>Proportion of people visiting this city: 7.281%","City name:  Nyon <br>Number of people visiting this city: 153 / 2486 <br>Proportion of people visiting this city: 6.154%","City name:  Orbe <br>Number of people visiting this city: 9 / 2486 <br>Proportion of people visiting this city: 0.362%","City name:  Ormont-Dessous <br>Number of people visiting this city: 6 / 2486 <br>Proportion of people visiting this city: 0.241%","City name:  Ormont-Dessus <br>Number of people visiting this city: 12 / 2486 <br>Proportion of people visiting this city: 0.483%","City name:  Payerne <br>Number of people visiting this city: 4 / 2486 <br>Proportion of people visiting this city: 0.161%","City name:  Prangins <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Renens <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Rolle <br>Number of people visiting this city: 5 / 2486 <br>Proportion of people visiting this city: 0.201%","City name:  Rossinière <br>Number of people visiting this city: 8 / 2486 <br>Proportion of people visiting this city: 0.322%","City name:  Rougemont <br>Number of people visiting this city: 69 / 2486 <br>Proportion of people visiting this city: 2.776%","City name:  Saint Croix <br>Number of people visiting this city: 8 / 2486 <br>Proportion of people visiting this city: 0.322%","City name:  Saint-Légier-La-Chiésaz <br>Number of people visiting this city: 2 / 2486 <br>Proportion of people visiting this city: 0.080%","City name:  Saint-Sulpice (VD) <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  St. Aubin <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Valbroye <br>Number of people visiting this city: 1 / 2486 <br>Proportion of people visiting this city: 0.040%","City name:  Vallorbe <br>Number of people visiting this city: 20 / 2486 <br>Proportion of people visiting this city: 0.805%","City name:  Vevey <br>Number of people visiting this city: 66 / 2486 <br>Proportion of people visiting this city: 2.655%","City name:  Veytaux <br>Number of people visiting this city: 6 / 2486 <br>Proportion of people visiting this city: 0.241%","City name:  Villars-sur-Ollon <br>Number of people visiting this city: 79 / 2486 <br>Proportion of people visiting this city: 3.178%","City name:  Villeneuve (VD) <br>Number of people visiting this city: 7 / 2486 <br>Proportion of people visiting this city: 0.282%","City name:  Yens <br>Number of people visiting this city: 3 / 2486 <br>Proportion of people visiting this city: 0.121%","City name:  Yverdon-les-Bains <br>Number of people visiting this city: 133 / 2486 <br>Proportion of people visiting this city: 5.350%","City name:  Yvonand <br>Number of people visiting this city: 4 / 2486 <br>Proportion of people visiting this city: 0.161%"],"textposition":["auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto"],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac054e1d438dae09e5dd" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ac054e1d438dae09e5dd">{"x":{"visdat":{"9f3e5c519264":["function () ","plotlyVisDat"]},"cur_data":"9f3e5c519264","attrs":{"9f3e5c519264":{"x":{},"y":{},"text":"","hoverinfo":"text","hovertext":{},"textposition":"auto","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Most Popular Destinations (District)","xaxis":{"domain":[0,1],"automargin":true,"title":"District","showgrid":false,"zeroline":false,"type":"category","categoryorder":"array","categoryarray":["Lausanne Tourisme","Montreux Riviera","Pays d'Enhaut Tourisme","Villars-Diablerets-Gryon-Bex","Aigle-Leysin-Les Mosses","Morges Région","Yverdon-les-Bains Région","Nyon Région Tourisme","Vallée de Joux","Estavayer-le-Lac/Payerne Tourisme","Moudon Région Tourisme","Avenches Tourisme","Echallens Région Tourisme"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Proportion","showgrid":true,"zeroline":false},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"modeBarButtonsToRemove":["pan2d","select2d","lasso2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines","zoom"]},"data":[{"x":["Aigle-Leysin-Les Mosses","Avenches Tourisme","Echallens Région Tourisme","Estavayer-le-Lac/Payerne Tourisme","Lausanne Tourisme","Montreux Riviera","Morges Région","Moudon Région Tourisme","Nyon Région Tourisme","Pays d'Enhaut Tourisme","Vallée de Joux","Villars-Diablerets-Gryon-Bex","Yverdon-les-Bains Région"],"y":[0.088093322606596941,0.0008045052292839903,0.00040225261464199515,0.0092518101367658895,0.25744167337087692,0.16291230893000805,0.076025744167337081,0.002011263073209976,0.071198712791633145,0.10378117457763475,0.057522123893805309,0.098551890587288818,0.072003218020917137],"text":["","","","","","","","","","","","",""],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text"],"hovertext":["District name:  Aigle-Leysin-Les Mosses <br>Number of people visiting this district: 219 / 2486 <br>Proportion of people visiting this district: 8.809%","District name:  Avenches Tourisme <br>Number of people visiting this district: 2 / 2486 <br>Proportion of people visiting this district: 0.080%","District name:  Echallens Région Tourisme <br>Number of people visiting this district: 1 / 2486 <br>Proportion of people visiting this district: 0.040%","District name:  Estavayer-le-Lac/Payerne Tourisme <br>Number of people visiting this district: 23 / 2486 <br>Proportion of people visiting this district: 0.925%","District name:  Lausanne Tourisme <br>Number of people visiting this district: 640 / 2486 <br>Proportion of people visiting this district: 25.744%","District name:  Montreux Riviera <br>Number of people visiting this district: 405 / 2486 <br>Proportion of people visiting this district: 16.291%","District name:  Morges Région <br>Number of people visiting this district: 189 / 2486 <br>Proportion of people visiting this district: 7.603%","District name:  Moudon Région Tourisme <br>Number of people visiting this district: 5 / 2486 <br>Proportion of people visiting this district: 0.201%","District name:  Nyon Région Tourisme <br>Number of people visiting this district: 177 / 2486 <br>Proportion of people visiting this district: 7.120%","District name:  Pays d'Enhaut Tourisme <br>Number of people visiting this district: 258 / 2486 <br>Proportion of people visiting this district: 10.378%","District name:  Vallée de Joux <br>Number of people visiting this district: 143 / 2486 <br>Proportion of people visiting this district: 5.752%","District name:  Villars-Diablerets-Gryon-Bex <br>Number of people visiting this district: 245 / 2486 <br>Proportion of people visiting this district: 9.855%","District name:  Yverdon-les-Bains Région <br>Number of people visiting this district: 179 / 2486 <br>Proportion of people visiting this district: 7.200%"],"textposition":["auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto","auto"],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As we can see, out of the 67 city surveyed in the 13 district, the most popular district is Lausanne Tourisme. This is not really suprising because of the way the data was collected. More people were surveyed in these city/districts than other smaller one. It is still interesting to have a look to keep this in mind.</p>
<section id="hotels-stars" class="level2">
<h2 class="anchored" data-anchor-id="hotels-stars">Hotels Stars</h2>
<p>Now, let’s have a look at the hotel standing of the places where the people stayed. This will highlight the quality of the stay per district.</p>
<section id="average-stars-per-city" class="level3">
<h3 class="anchored" data-anchor-id="average-stars-per-city">Average Stars per City</h3>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-6fe40bdd1dbe2a34d8f9" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6fe40bdd1dbe2a34d8f9">{"x":{"visdat":{"9f3e7abdedd8":["function () ","plotlyVisDat"]},"cur_data":"9f3e7abdedd8","attrs":{"9f3e7abdedd8":{"x":{},"y":{},"text":"","hoverinfo":"text","hovertext":{},"name":"Average Stars","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Average Stars per District","xaxis":{"domain":[0,1],"automargin":true,"title":"City","type":"category","categoryorder":"array","categoryarray":["Moudon Région Tourisme","Montreux Riviera","Villars-Diablerets-Gryon-Bex","Yverdon-les-Bains Région","Nyon Région Tourisme","Morges Région","Lausanne Tourisme","Pays d'Enhaut Tourisme","Aigle-Leysin-Les Mosses","Vallée de Joux","Estavayer-le-Lac/Payerne Tourisme","Avenches Tourisme","Echallens Région Tourisme"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Average Stars"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"modeBarButtonsToRemove":["pan2d","select2d","lasso2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines","zoom"]},"data":[{"x":["Moudon Région Tourisme","Montreux Riviera","Villars-Diablerets-Gryon-Bex","Yverdon-les-Bains Région","Nyon Région Tourisme","Morges Région","Lausanne Tourisme","Pays d'Enhaut Tourisme","Aigle-Leysin-Les Mosses","Vallée de Joux","Estavayer-le-Lac/Payerne Tourisme"],"y":[5,3.75,3.6200000000000001,3.5800000000000001,3.5600000000000001,3.54,3.52,3.3199999999999998,3.1899999999999999,3.1200000000000001,3],"text":["","","","","","","","","","",""],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text"],"hovertext":["District name:  Moudon Région Tourisme <br>Average Stars: 5 <br>Number of people visiting this district: 5 / 2486","District name:  Montreux Riviera <br>Average Stars: 3.75 <br>Number of people visiting this district: 405 / 2486","District name:  Villars-Diablerets-Gryon-Bex <br>Average Stars: 3.62 <br>Number of people visiting this district: 245 / 2486","District name:  Yverdon-les-Bains Région <br>Average Stars: 3.58 <br>Number of people visiting this district: 179 / 2486","District name:  Nyon Région Tourisme <br>Average Stars: 3.56 <br>Number of people visiting this district: 177 / 2486","District name:  Morges Région <br>Average Stars: 3.54 <br>Number of people visiting this district: 189 / 2486","District name:  Lausanne Tourisme <br>Average Stars: 3.52 <br>Number of people visiting this district: 640 / 2486","District name:  Pays d'Enhaut Tourisme <br>Average Stars: 3.32 <br>Number of people visiting this district: 258 / 2486","District name:  Aigle-Leysin-Les Mosses <br>Average Stars: 3.19 <br>Number of people visiting this district: 219 / 2486","District name:  Vallée de Joux <br>Average Stars: 3.12 <br>Number of people visiting this district: 143 / 2486","District name:  Estavayer-le-Lac/Payerne Tourisme <br>Average Stars: 3 <br>Number of people visiting this district: 23 / 2486"],"name":"Average Stars","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="number-of-observations-per-city" class="level3">
<h3 class="anchored" data-anchor-id="number-of-observations-per-city">Number of Observations per City</h3>
<div class="cell">
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-fefc90a9065fea59f3fd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-fefc90a9065fea59f3fd">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],["Lausanne Tourisme","Montreux Riviera","Pays d'Enhaut Tourisme","Villars-Diablerets-Gryon-Bex","Aigle-Leysin-Les Mosses","Morges Région","Yverdon-les-Bains Région","Nyon Région Tourisme","Vallée de Joux","Estavayer-le-Lac/Payerne Tourisme","Moudon Région Tourisme","Avenches Tourisme","Echallens Région Tourisme"],[640,405,258,245,219,189,179,177,143,23,5,2,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>F105_OrgCode<\/th>\n      <th>Number_observations<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":15,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"F105_OrgCode","targets":1},{"name":"Number_observations","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="distribution-of-stars-by-city" class="level3">
<h3 class="anchored" data-anchor-id="distribution-of-stars-by-city">Distribution of Stars by City</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering to exclude cities with no valid data in F130_num</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(F130_num)) <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(F105_OrgCode) <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate the average to ensure we only include cities with data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Average_F130_num =</span> <span class="fu">mean</span>(F130_num, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Average_F130_num)) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Average_F130_num))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Reorder the F105_Code factor in the filtered dataframe according to the calculated averages</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>F105_Code <span class="ot">&lt;-</span> <span class="fu">factor</span>(data<span class="sc">$</span>F105_OrgCode, <span class="at">levels =</span> data_filtered<span class="sc">$</span>F105_OrgCode)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure that the original dataframe is filtered to match the selected cities</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(F105_OrgCode <span class="sc">%in%</span> data_filtered<span class="sc">$</span>F105_OrgCode)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the chart with geom_density_ridges_gradient for cities with valid data in F130_num</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> F130_num, <span class="at">y =</span> F105_OrgCode, <span class="at">fill =</span> ..x..)) <span class="sc">+</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="dv">3</span>, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>) <span class="sc">+</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"C"</span>) <span class="sc">+</span> <span class="co"># Use a color gradient</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of F130_num by City with Gradient"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"F130_num"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"City (F105_OrgCode)"</span>) <span class="sc">+</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..x..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(x)` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Picking joint bandwidth of 0.423</code></pre>
</div>
<div class="cell-output-display">
<p><img src="question_4_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="list-of-hotels-sorted-by-number-of-stars" class="level3">
<h3 class="anchored" data-anchor-id="list-of-hotels-sorted-by-number-of-stars">List of Hotels Sorted by Number of Stars</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculation of the number of observations per city with a value in F130_num</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>observations_per_city <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(F130_num)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(F105_OrgCode) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Number_observations =</span> <span class="fu">n</span>())</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the data to include the number of observations in average_per_city</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>average_and_number_per_city <span class="ot">&lt;-</span> average_per_city <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(observations_per_city, <span class="at">by =</span> <span class="st">"F105_OrgCode"</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the table with datatable and adjust options</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(average_and_number_per_city, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">15</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item" id="htmlwidget-b36e181910ccb3c4a323" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b36e181910ccb3c4a323">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],["Moudon Région Tourisme","Montreux Riviera","Villars-Diablerets-Gryon-Bex","Yverdon-les-Bains Région","Nyon Région Tourisme","Morges Région","Lausanne Tourisme","Pays d'Enhaut Tourisme","Aigle-Leysin-Les Mosses","Vallée de Joux","Estavayer-le-Lac/Payerne Tourisme","Avenches Tourisme","Echallens Région Tourisme"],[5,3.75,3.62,3.58,3.56,3.54,3.52,3.32,3.19,3.12,3,null,null],[1,162,55,31,36,26,248,57,59,32,5,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>F105_OrgCode<\/th>\n      <th>Average_F130_num<\/th>\n      <th>Number_observations<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":15,"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"F105_OrgCode","targets":1},{"name":"Average_F130_num","targets":2},{"name":"Number_observations","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>